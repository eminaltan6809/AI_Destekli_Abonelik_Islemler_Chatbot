@{
    ViewData["Title"] = "Chatbot";
    var scenario = ViewBag.Scenario ?? "Sohbet";
    var chatHistory = Context.Session.GetString("ChatHistory") ?? "";
}
<div class="container py-5">
    <div class="row justify-content-center">
        <div class="col-lg-7 col-md-10">
            <div class="d-flex align-items-center mb-4 gap-3">
                <div class="rounded-circle bg-primary d-flex align-items-center justify-content-center" style="width:48px;height:48px;">
                    <i class="bi bi-robot text-white fs-3"></i>
                </div>
                <div>
                    <h2 class="mb-0 fw-bold" style="color:#6366f1">@scenario Chatbot</h2>
                    <div class="text-muted small">AI destekli abonelik işlemleri asistanı</div>
                </div>
            </div>
            <div id="chatbox">
                @foreach (var line in chatHistory.Split('\n'))
                {
                    if (!string.IsNullOrWhiteSpace(line))
                    {
                        var isBot = line.StartsWith("Bot:");
                        <div class="d-flex @(isBot ? "justify-content-start" : "justify-content-end")">
                            <div class="chat-bubble @(isBot ? "bot" : "user")">
                                <span>@line.Substring(line.IndexOf(":") + 1).Trim()</span>
                            </div>
                        </div>
                    }
                }
            </div>
            <form id="chatForm" class="d-flex mt-3">
                <input type="text" id="userInput" class="form-control flex-grow-1" placeholder="Mesajınızı yazın..." autocomplete="off" />
                <button type="submit" class="btn btn-primary ms-2"><i class="bi bi-send"></i> Gönder</button>
            </form>
        </div>
    </div>
</div>
@section Scripts {
    <script src="~/js/chat.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css" />
} 